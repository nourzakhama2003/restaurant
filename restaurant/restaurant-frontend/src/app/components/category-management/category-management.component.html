<div class="categories-page">
    <div class="categories-header">
        <h2>
            <svg width="28" height="28" fill="none" stroke="#4f46e5" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;">
        <circle cx="12" cy="12" r="10"/>
        <path d="M8 12h8M8 16h8M8 8h8"/>
      </svg> Categories
        </h2>
        <button class="add-btn" (click)="editingCategory = null; form.reset();">
      <svg width="20" height="20" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;">
        <path d="M12 5v14M5 12h14"/>
      </svg>
      Add Category
    </button>
    </div>
    <div class="categories-list">
        <div class="category-card" *ngFor="let cat of categories">
            <div class="category-avatar">
                <img [src]="cat.imageBase64 || '/assets/images/fastfood.jpeg'" alt="Category" />
            </div>
            <div class="category-info">
                <div class="category-name">{{ cat.name }}</div>
                <div class="category-desc">{{ cat.description }}</div>
            </div>
            <div class="category-actions">
                <button class="edit-btn" (click)="edit(cat)">
          <svg width="18" height="18" fill="none" stroke="#4f46e5" stroke-width="2" viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19.5 3 21l1.5-4L16.5 3.5z"/></svg>
        </button>
                <button class="delete-btn" (click)="delete(cat)">
          <svg width="18" height="18" fill="none" stroke="#e53e3e" stroke-width="2" viewBox="0 0 24 24"><path d="M3 6h18"/><path d="M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6"/><path d="M10 11v6"/><path d="M14 11v6"/><path d="M5 6V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2"/></svg>
        </button>
            </div>
        </div>
    </div>
    <div class="category-form-card">
        <form [formGroup]="form" (ngSubmit)="submit()">
            <div class="form-row">
                <input class="Input" formControlName="name" required placeholder="Category name..." />
            </div>
            <div class="form-row">
                <input class="Input" formControlName="description" placeholder="Description..." />
            </div>
            <div class="form-row">
                <div class="upload-container">
                    <input id="categoryImageUpload" type="file" accept="image/*" (change)="onImageSelected($event)" class="hidden-input">
                    <label for="categoryImageUpload" class="upload-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="upload-icon">
              <path d="M12 13v8"/>
              <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/>
              <path d="m8 17 4-4 4 4"/>
            </svg>
            <span class="upload-text">Upload Image</span>
          </label>
                </div>
                <div *ngIf="form.value.imageBase64" class="image-preview">
                    <img [src]="form.value.imageBase64" alt="Category Image" style="max-width: 80px; max-height: 80px; border-radius: 50%; margin-top: 8px;" />
                </div>
            </div>
            <div class="form-row">
                <button mat-flat-button color="primary" type="submit">{{ editingCategory ? 'Update' : 'Add' }} Category</button>
                <button mat-button type="button" *ngIf="editingCategory" (click)="cancelEdit()">Cancel</button>
            </div>
        </form>
    </div>
</div>