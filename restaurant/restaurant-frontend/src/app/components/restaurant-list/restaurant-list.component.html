<div class="restaurants-container">
    <!-- Header Section -->
    <div class="restaurants-header">
        <div class="header-content">
            <div class="header-title-section">
                <div class="title-icon">
                    <mat-icon>restaurant</mat-icon>
                </div>
                <div class="title-content">
                    <h1 class="page-title">Restaurants </h1>
                    <p class="page-subtitle">Gérez tous vos restaurants</p>
                </div>
            </div>
            <button class="add-restaurant-btn" (click)="openDialog()">
                <mat-icon>add</mat-icon>
                <span>Nouveau Restaurant</span>
            </button>
        </div>
    </div>

    <!-- Search and Filter Section -->
    <div class="search-filter-section">
        <div class="search-container">
            <div class="search-input-wrapper">
                <mat-icon class="search-icon">search</mat-icon>
                <input type="text" class="search-input" placeholder="Rechercher un restaurant..." [(ngModel)]="searchText" />
                <button *ngIf="searchText" class="clear-search-btn" (click)="clearSearch()" mat-icon-button>
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        </div>
        <div class="filter-info" *ngIf="searchText">
            <mat-icon>filter_list</mat-icon>
            <span>{{ filteredRestaurants().length }} restaurant(s) trouvé(s)</span>
        </div>
    </div>

    <!-- Content Section -->
    <div class="restaurants-content">
        <!-- Loading State -->
        <div class="loading-state" *ngIf="isLoading">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Chargement des restaurants...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="!isLoading && filteredRestaurants().length === 0">
            <div class="empty-icon">
                <mat-icon>restaurant</mat-icon>
            </div>
            <h3>Aucun restaurant trouvé</h3>
            <p *ngIf="searchText">Aucun restaurant ne correspond à votre recherche.</p>
            <p *ngIf="!searchText">Commencez par ajouter votre premier restaurant.</p>
            <button class="create-first-btn" (click)="openDialog()" *ngIf="!searchText">
                <mat-icon>add</mat-icon>
                Créer le premier restaurant
            </button>
        </div>

        <!-- Restaurants Grid -->
        <div class="restaurants-grid" *ngIf="!isLoading && filteredRestaurants().length > 0">
            <div class="restaurant-card" *ngFor="let restaurant of filteredRestaurants(); let i = index" [@fadeInUp] [style.animation-delay]="(i * 100) + 'ms'">
                <!-- Card Header with Image -->
                <div class="card-header">
                    <div class="restaurant-image">
                        <img [src]="getRestaurantImage(restaurant)" [alt]="restaurant.name" />
                        <div class="image-overlay">
                            <mat-icon>photo_camera</mat-icon>
                        </div>
                    </div>
                    <div class="restaurant-badge">
                        <span>Restaurant</span>
                    </div>
                </div>

                <!-- Card Content -->
                <div class="card-content">
                    <h3 class="restaurant-name">{{ restaurant.name }}</h3>
                    <p class="restaurant-description">{{ restaurant.description || 'Aucune description' }}</p>

                    <div class="restaurant-details">
                        <div class="detail-item" *ngIf="restaurant.cuisineType">
                            <mat-icon>local_dining</mat-icon>
                            <span>{{ restaurant.cuisineType }}</span>
                        </div>
                        <div class="detail-item" *ngIf="restaurant.address">
                            <mat-icon>location_on</mat-icon>
                            <span>{{ restaurant.address }}</span>
                        </div>
                        <div class="detail-item" *ngIf="restaurant.phone">
                            <mat-icon>phone</mat-icon>
                            <span>{{ restaurant.phone }}</span>
                        </div>
                    </div>
                </div>

                <!-- Card Actions -->
                <div class="card-actions ">
                    <button class="action-btn menu-btn" [routerLink]="['/restaurants', restaurant.id, 'menu']" matTooltip="Voir le menu">
                        <mat-icon>restaurant_menu</mat-icon>
                    </button>
                    <button class="action-btn edit-btn" (click)="openDialog(restaurant)" matTooltip="Modifier le restaurant">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button class="action-btn delete-btn" *ngIf="restaurant.id" (click)="deleteRestaurant(restaurant.id)" matTooltip="Supprimer le restaurant">
                        <mat-icon>delete</mat-icon>
                    </button>
                    <button class="action-btn location-btn" (click)="openMapPopup(restaurant)" matTooltip="Voir l'emplacement sur Google Maps">
                        <mat-icon>location_on</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>