<div class="restaurant-form-container">
    <!-- Form Header -->
    <div class="form-header">
        <div class="form-title-section">
            <mat-icon class="form-icon">{{ isEditMode ? 'edit' : 'add' }}</mat-icon>
            <h2>{{ isEditMode ? 'Modifier le Restaurant' : 'Nouveau Restaurant' }}</h2>
        </div>
        <button class="close-btn" (click)="onCancel()">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-overlay" *ngIf="isLoading">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Chargement...</p>
    </div>

    <!-- Form Content -->
    <form [formGroup]="restaurantForm" (ngSubmit)="onSubmit()" class="restaurant-form">
        <div class="form-content">
            <!-- Restaurant Name -->
            <div class="form-field">
                <label class="field-label">
                    <mat-icon>restaurant</mat-icon>
                    Nom du restaurant *
                </label>
                <input class="form-input" formControlName="name" placeholder="ex: Pizza Palace" required />
                <div class="error-message" *ngIf="restaurantForm.get('name')?.hasError('required') && restaurantForm.get('name')?.touched">
                    Le nom du restaurant est requis
                </div>
            </div>

            <!-- Description -->
            <div class="form-field">
                <label class="field-label">
                    <mat-icon>description</mat-icon>
                    Description
                </label>
                <textarea class="form-textarea" formControlName="description" placeholder="Décrivez votre restaurant..." rows="3"></textarea>
            </div>

            <!-- Address -->
            <div class="form-field">
                <label class="field-label">
                    <mat-icon>location_on</mat-icon>
                    Adresse
                </label>
                <input class="form-input" formControlName="address" placeholder="Adresse complète du restaurant" />
            </div>

            <!-- Phone -->
            <div class="form-field">
                <label class="field-label">
                    <mat-icon>phone</mat-icon>
                    Téléphone
                </label>
                <input class="form-input" formControlName="phone" placeholder="Numéro de téléphone" />
            </div>

            <!-- Cuisine Type -->
            <div class="form-field">
                <label class="field-label">
                    <mat-icon>local_dining</mat-icon>
                    Type de cuisine
                </label>
                <input class="form-input" formControlName="cuisineType" placeholder="ex: Italienne, Tunisienne, Française" />
            </div>

            <!-- Image Upload -->
            <div class="form-field">
                <label class="field-label">
                    <mat-icon>image</mat-icon>
                    Image du restaurant
                </label>
                <div class="image-upload-section">
                    <div class="current-image" *ngIf="selectedImage">
                        <img [src]="selectedImage" alt="Image du restaurant" />
                        <button type="button" class="remove-image-btn" (click)="removeImage()" matTooltip="Supprimer l'image">
                            <mat-icon>close</mat-icon>
                        </button>
                    </div>

                    <div class="upload-area" *ngIf="!selectedImage">
                        <input id="imageUpload" type="file" accept="image/*" (change)="onFileSelected($event)" class="hidden-input">
                        <label for="imageUpload" class="upload-label">
                            <mat-icon class="upload-icon">cloud_upload</mat-icon>
                            <span class="upload-text">Cliquez pour ajouter une image</span>
                            <span class="upload-hint">PNG, JPG jusqu'à 5MB</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <button type="button" class="cancel-btn" (click)="onCancel()">
                <mat-icon>close</mat-icon>
                Annuler
            </button>
            <button type="submit" class="submit-btn" [disabled]="restaurantForm.invalid || isLoading">
                <mat-icon *ngIf="!isLoading">{{ isEditMode ? 'save' : 'add' }}</mat-icon>
                <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
                {{ isLoading ? 'Enregistrement...' : (isEditMode ? 'Mettre à jour' : 'Créer') }}
            </button>
        </div>
    </form>
</div>